meta {
  name: Simulate OpenAI Usage
  type: http
  seq: 5
}

post {
  url: {{credytApiUrl}}/products/{{openAIProductId}}/default/simulate-usage
  body: json
  auth: inherit
}

body:json {
  {
    "events": [
      {
        "id": "{{$randomUUID}}",
        "event_type": "response_completed",
        "occurred_at": "{{$isoTimestamp}}",
        "subject": "response_{{$randomUUID}}",
        "description": "Response Completed",
        "data": {
          "input_tokens": 1000000,
          "output_tokens": 1000000
        }
      }
    ]
  }
}

settings {
  encodeUrl: true
  timeout: 0
}
